webpackJsonp([13],{0:function(e,t,a){e.exports=a(1418)},1375:function(e,t,a){"use strict";a(1376)},1376:function(e,t,a){"use strict";a(1377),a(1380)},1377:function(e,t,a){"use strict";a(137),a(1378)},1378:function(e,t,a){var n=a(1379);"string"==typeof n&&(n=[[e.id,n,""]]);a(13)(n,{});n.locals&&(e.exports=n.locals)},1379:function(e,t,a){t=e.exports=a(12)(),t.push([e.id,'.am-picker-col{display:block;position:relative;height:238px;overflow:hidden;width:100%}.am-picker-col-content{position:absolute;left:0;top:0;width:100%;z-index:1;padding:102px 0}.am-picker-col-item{-ms-touch-action:manipulation;touch-action:manipulation;text-align:center;font-size:16px;height:34px;line-height:34px;color:#000;white-space:nowrap;text-overflow:ellipsis}.am-picker-col-item-selected{font-size:17px}.am-picker-col-mask{top:0;height:100%;margin:0 auto;background-image:linear-gradient(180deg,hsla(0,0%,100%,.95),hsla(0,0%,100%,.6)),linear-gradient(0deg,hsla(0,0%,100%,.95),hsla(0,0%,100%,.6));background-position:top,bottom;background-size:100% 102px;background-repeat:no-repeat}.am-picker-col-indicator,.am-picker-col-mask{position:absolute;left:0;width:100%;z-index:3}.am-picker-col-indicator{box-sizing:border-box;height:34px;top:102px;border-top:1px solid #ddd;border-bottom:1px solid #ddd}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-picker-col-indicator{border-top:none}html:not([data-scale]) .am-picker-col-indicator:before{content:"";position:absolute;background-color:#ddd;display:block;z-index:1;top:0;right:auto;bottom:auto;left:0;width:100%;height:1px;transform-origin:50% 50%;transform:scaleY(.5)}}@media (-webkit-min-device-pixel-ratio:2) and (-webkit-min-device-pixel-ratio:3),(min-resolution:2dppx) and (min-resolution:3dppx){html:not([data-scale]) .am-picker-col-indicator:before{transform:scaleY(.33)}}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-picker-col-indicator{border-bottom:none}html:not([data-scale]) .am-picker-col-indicator:after{content:"";position:absolute;background-color:#ddd;display:block;z-index:1;top:auto;right:auto;bottom:0;left:0;width:100%;height:1px;transform-origin:50% 100%;transform:scaleY(.5)}}@media (-webkit-min-device-pixel-ratio:2) and (-webkit-min-device-pixel-ratio:3),(min-resolution:2dppx) and (min-resolution:3dppx){html:not([data-scale]) .am-picker-col-indicator:after{transform:scaleY(.33)}}.am-picker{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.am-picker-item{-ms-flex:1;flex:1;text-align:center}',""])},1380:function(e,t,a){var n=a(1381);"string"==typeof n&&(n=[[e.id,n,""]]);a(13)(n,{});n.locals&&(e.exports=n.locals)},1381:function(e,t,a){t=e.exports=a(12)(),t.push([e.id,'.am-picker-popup{left:0;bottom:0;position:fixed;width:100%;background-color:#fff;padding-bottom:env(safe-area-inset-bottom)}.am-picker-popup-wrap{overflow:auto;-webkit-overflow-scrolling:touch;outline:0}.am-picker-popup-mask,.am-picker-popup-wrap{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;transform:translateZ(1px)}.am-picker-popup-mask{background-color:rgba(0,0,0,.4);height:100%}.am-picker-popup-mask-hidden{display:none}.am-picker-popup-header{background-image:linear-gradient(180deg,#e7e7e7,#e7e7e7,transparent,transparent);background-position:bottom;background-size:100% 1px;background-repeat:no-repeat;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;position:relative;border-bottom:1px solid #ddd}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-picker-popup-header{border-bottom:none}html:not([data-scale]) .am-picker-popup-header:after{content:"";position:absolute;background-color:#ddd;display:block;z-index:1;top:auto;right:auto;bottom:0;left:0;width:100%;height:1px;transform-origin:50% 100%;transform:scaleY(.5)}}@media (-webkit-min-device-pixel-ratio:2) and (-webkit-min-device-pixel-ratio:3),(min-resolution:2dppx) and (min-resolution:3dppx){html:not([data-scale]) .am-picker-popup-header:after{transform:scaleY(.33)}}.am-picker-popup-header .am-picker-popup-header-right{text-align:right}.am-picker-popup-item{color:#108ee9;font-size:17px;padding:9px 15px;height:42px;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.am-picker-popup-item-active{background-color:#ddd}.am-picker-popup-title{-ms-flex:1;flex:1;text-align:center;color:#000}.am-picker-popup .am-picker-popup-close{display:none}.am-picker-col{-ms-flex:1;flex:1}',""])},1382:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(2),c=n(d),s=a(1383),u=n(s),f=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedData:a.props.data&&a.props.data[0],index:0},a}return o(t,e),r(t,[{key:"_renderItem",value:function(e,t){var a=this;return c.default.createElement("div",{key:t,className:u.default.bodyItem,style:t===this.state.index?{color:"#0084FF"}:null,onClick:function(){return a.setState({selectedData:e,index:t})}},c.default.createElement("span",null,e.name))}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onSure,l=t.onCancel,i=t.title,o=this.state.selectedData;return a?c.default.createElement("div",{className:u.default.container},c.default.createElement("div",{className:u.default.content},c.default.createElement("div",{className:u.default.headDiv},c.default.createElement("span",{onClick:function(){l&&l()}},"取消"),c.default.createElement("span",{style:{color:"#292830",fontSize:"14px",fontWeight:"400"}},i||""),c.default.createElement("span",{onClick:function(){n&&n(o)}},"确定")),c.default.createElement("div",{style:{backgroundColor:"#EFF0F3",height:"1px"}}),c.default.createElement("div",{className:u.default.bodyDiv},a.map(function(t,a){return e._renderItem(t,a)})))):null}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),t}(d.Component);t.default=f},1383:function(e,t,a){var n=a(1384);"string"==typeof n&&(n=[[e.id,n,""]]);a(13)(n,{});n.locals&&(e.exports=n.locals)},1384:function(e,t,a){t=e.exports=a(12)(),t.push([e.id,"._-components-SelectSingleView-_index_container_3xABU{width:100vw;height:100vh;background:rgba(0,0,0,.5);position:fixed;left:0;top:0;z-index:200}._-components-SelectSingleView-_index_content_2mGCg{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:fixed;left:0;bottom:0;background-color:#fff}._-components-SelectSingleView-_index_headDiv_X39O2{height:45px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;line-height:45px;font-size:15px;margin:auto 16px;color:#0084ff;font-weight:500}._-components-SelectSingleView-_index_bodyDiv_FoVUS{display:-ms-flexbox;display:flex;max-height:30vh;min-height:20vh;overflow:auto;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}._-components-SelectSingleView-_index_bodyItem_2JiC7{-ms-flex-negative:0;flex-shrink:0;width:100vw;height:44px;line-height:44px;color:#000;font-size:16px;text-align:center}",""]),t.locals={container:"_-components-SelectSingleView-_index_container_3xABU",content:"_-components-SelectSingleView-_index_content_2mGCg",headDiv:"_-components-SelectSingleView-_index_headDiv_X39O2",bodyDiv:"_-components-SelectSingleView-_index_bodyDiv_FoVUS",bodyItem:"_-components-SelectSingleView-_index_bodyItem_2JiC7"}},1418:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(l,i){try{var o=t[l](i),r=o.value}catch(e){return void a(e)}return o.done?void e(r):Promise.resolve(r).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function c(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),l=n.length,i=new Uint8Array(l);l--;)i[l]=n.charCodeAt(l);return new Blob([i],{type:a})}function s(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=a>9?a:"0"+a,l=e.getDay()+1,i=l>9?l:"0"+l;return""+t+n+i+"/"+e.getTime()+"/"}var u=a(331),f=n(u),m=a(25),p=n(m),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1375),a(136);var w=a(2),_=n(w),x=a(5),v=n(x);a(15);var y=a(9),b=n(y),S=a(1382),I=n(S),k=a(1367),E=n(k),N=a(1419),B=n(N),C=a(24),D=(a(178),a(1387)),V=(n(D),a(1391)),T=n(V),L=a(1356),P=n(L),U=a(1421),F=n(U),Q=a(157),z=function(){var e=d(regeneratorRuntime.mark(function e(t,a){var n,l,i,o,r,d,u,f,m,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=[],l=[],i=!0,o=!1,r=void 0,e.prev=6,d=a[Symbol.iterator]();!(i=(u=d.next()).done);i=!0)f=u.value,f.upload?(m=s()+f.fileName,l.push(m),p=azblob.BlockBlobURL.fromContainerURL(t,m),n.push(azblob.uploadBrowserDataToBlockBlob(azblob.Aborter.none,c(f.fileUrl),p))):l.push(f.fileUrl);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),o=!0,r=e.t0;case 14:e.prev=14,e.prev=15,!i&&d.return&&d.return();case 17:if(e.prev=17,!o){e.next=20;break}throw r;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,Promise.all(n);case 24:return e.abrupt("return",l);case 27:e.prev=27,e.t1=e.catch(0),console.log(e.t1);case 30:case"end":return e.stop()}},e,void 0,[[0,27],[6,10,14,22],[15,,17,21]])}));return function(t,a){return e.apply(this,arguments)}}(),R=!0,O=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.device="device",a.category="category",a.levels="levels",(0,C.getQueryString)("siteId")!==localStorage.getItem("flaw_siteId")&&localStorage.getItem("flaw_siteId")&&(0,C.getQueryString)("siteId")&&!localStorage.getItem("flaw_type_link")&&setTimeout(function(){a.setState({faultName:"",areaId:"",categoryId:"",deviceId:"",type:a._gQS("type")||0,faultLevel:"",wrongCode:"",expectedTime:"",findTime:"",describe:"",faultReason:"",loseEnergy:"",createUserId:"",typeId:"",resultId:"",faultLevelName:"",categoryIdName:"",deviceIdName:"",areaIdName:"",createUserIdName:""},function(){var e=a.state.type;a._clearAll(),localStorage.setItem("flaw_type",e)})},100);var n=localStorage.getItem("steps_to_flawnew_data");return n?(localStorage.removeItem("steps_to_flawnew_data"),n=JSON.parse(n),a.state={powerStationId:a._gQS("siteId","powerStationId")||"",faultName:n.faultName||"",areaId:n.areaId||"",categoryId:n.categoryId||"",deviceId:n.deviceId||"",type:n.type||0,faultLevel:"",wrongCode:"",expectedTime:"",findTime:"",describe:"",faultReason:"",loseEnergy:"",createUserId:"",typeId:n.typeId||"",resultId:n.resultId||"",faultLevelName:"",categoryIdName:n.categoryIdName||"",deviceIdName:n.deviceIdName||"",areaIdName:n.areaIdName||"",createUserIdName:"",showPreView:!1,imageList:"[]",preViewIndex:0,containerURL:"",ssvTitle:"",ssvData:null,ssvShow:!1,showPhoto:!1,changeContent:!0},setTimeout(function(){a._sState(n)},100)):a.state={powerStationId:a._gQS("siteId","powerStationId")||"",faultName:a._gQS("faultName"),areaId:a._gQS("areaId"),categoryId:a._gQS("categoryId"),deviceId:a._gQS("deviceId"),type:a._gQS("type")||0,faultLevel:a._gQS("faultLevel"),wrongCode:a._gQS("wrongCode"),expectedTime:a._gQS("expectedTime"),findTime:a._gQS("findTime"),describe:a._gQS("describe"),faultReason:a._gQS("faultReason"),loseEnergy:a._gQS("loseEnergy"),createUserId:a._gQS("createUserId"),typeId:a._gQS("typeId"),resultId:a._gQS("resultId"),faultLevelName:a._gQS("faultLevelName"),categoryIdName:a._gQS("categoryIdName"),deviceIdName:a._gQS("deviceIdName"),areaIdName:a._gQS("areaIdName"),createUserIdName:a._gQS("createUserIdName"),showPreView:!1,imageList:a._gQS("imageList")||"[]",preViewIndex:0,containerURL:"",ssvTitle:"",ssvData:null,ssvShow:!1,showPhoto:!1,changeContent:!0},"1"!=(0,C.getQueryString)("type")&&"2"!=(0,C.getQueryString)("type")||localStorage.setItem("flaw_type_link",parent.location.hash),console.log("========= constructor"),a}return r(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this;(0,C.api)("s-solaromds/app/common/sas",{},"POST",!1).then(function(t){var a=new azblob.ContainerURL("https://solarasset.blob.core.chinacloudapi.cn/omtest1/?"+t,azblob.StorageURL.newPipeline(new azblob.AnonymousCredential));e.setState({containerURL:a})}).catch(function(e){console.log(e)}),setTimeout(function(){console.log("window.top.navigator.customerId"),console.log(window.top.navigator.customerId),console.log("window.top.navigator.customerName"),console.log(window.top.navigator.customerName),console.log(window.top.navigator),!e.state.createUserId&&window.top.navigator.customerId&&window.top.navigator.customerName&&e._sState({createUserId:window.top.navigator.customerId,createUserIdName:window.top.navigator.customerName})},1e3),this.state.findTime||this._sState({findTime:(0,C.fmtDate)(new Date,"yyyy-MM-dd")})}},{key:"_showTopView",value:function(e){console.log("_showTopView");var t=window.parent.document.body;e?t.style.backgroundColor="rgba(0, 0, 0, 0.4)":t.style.backgroundColor="rgba(0,0,0,0.5)",Q.StatusBar.backgroundColorByHexString("#000"),Q.StatusBar.styleDefault()}},{key:"_hideTopView",value:function(e){console.log("_hideTopView");var t=window.parent.document.body;t.style.backgroundColor="#FFFFFF",Q.StatusBar.backgroundColorByHexString("#000"),Q.StatusBar.styleDefault()}},{key:"_datePicker",value:function(e){e?this._showTopView(!0):this._hideTopView(!0)}},{key:"handlePreview",value:function(e){console.log(e),this.setState({showPreView:!0,preViewIndex:e})}},{key:"handleClosePreview",value:function(){this.setState({showPreView:!1})}},{key:"takePhotos",value:function(e){console.log("info",e);var t=[].concat(l(JSON.parse(this.state.imageList)));t.push(e),this._sState({imageList:JSON.stringify(t)})}},{key:"handleDeletPhoto",value:function(e){console.log(e);var t=[].concat(l(JSON.parse(this.state.imageList)));t.splice(e,1),this._sState({imageList:JSON.stringify(t)})}},{key:"_ssvCancel",value:function(){this.setState({ssvTitle:"",ssvData:null,ssvShow:!1}),this._hideTopView()}},{key:"_ssvSure",value:function(e){if(!e||!e.type)return this.setState({ssvTitle:"",ssvData:null,ssvShow:!1}),void this._hideTopView();switch(e.type){case this.category:this._sState({categoryId:e.id,categoryIdName:e.name});break;case this.device:this._sState({deviceId:e.id,deviceIdName:e.name});break;case this.levels:this._sState({faultLevel:e.id,faultLevelName:e.name})}this.setState({ssvTitle:"",ssvData:null,ssvShow:!1}),this._hideTopView()}},{key:"_changeData",value:function(e,t,a,n){return e.map(function(l,i){e[i].name=e[i][t],e[i].id=e[i][a],e[i].type=n}),e}},{key:"_getCategoryIdData",value:function(){var e=this,t={powerStationId:this._gQS("siteId","powerStationId")||"liuyl-wind-01",areaId:this._gQS("areaId")};return t.powerStationId?void(0,C.api)("s-solaromds/app/op/fault/categoryList",t,"POST").then(function(t){console.log("categoryList:{categoryId,categoryName}"),console.log(t),e.setState({ssvTitle:"设备类型",ssvData:e._changeData(t,"categoryName","categoryId",e.category),ssvShow:!0}),e._showTopView()}):void p.default.show("请先选择电站",2)}},{key:"_getDeviceIdData",value:function(){var e=this,t={stationId:this._gQS("siteId","powerStationId")||"liuyl-wind-01",areaId:this._gQS("areaId"),name:"",categoryId:this.state.categoryId||""};return t.stationId?void(0,C.api)("s-solaromds/app/common/devices",t,"POST").then(function(t){console.log(t),e.setState({ssvTitle:"设备名称",ssvData:e._changeData(t,"deviceName","deviceId",e.device),ssvShow:!0}),e._showTopView()}):void p.default.show("请先选择电站",2)}},{key:"_getLevelsData",value:function(){var e=this;(0,C.api)("s-solaromds/app/op/fault/levels",{},"GEt").then(function(t){console.log(t),e.setState({ssvTitle:"缺陷等级",ssvData:e._changeData(t,"levelName","levelId",e.levels),ssvShow:!0}),e._showTopView()})}},{key:"_gQS",value:function(e,t){if(e&&t)return(0,C.getQueryString)(e)&&localStorage.setItem("flaw_"+e,(0,C.getQueryString)(e)),(0,C.getQueryString)(e)||localStorage.getItem(t)||"";if(e){if((0,C.getQueryString)(e)&&localStorage.setItem("flaw_"+e,(0,C.getQueryString)(e)),"imageList"==e){var a=this;return Q.sharedDataApi.getShellPersistentData("flaw_imageList").then(function(e){a.setState({imageList:e}),F.default.imageList=e}).catch(function(e){console.log("sss 获取图片失败"),console.log(e)}),F.default.imageList}return(0,C.getQueryString)(e)||localStorage.getItem("flaw_"+e)||""}return""}},{key:"_clearAll",value:function(){for(var e=this.state,t=Object.keys(e),a=0;a<t.length;a++)try{localStorage.removeItem("flaw_"+t[a]),F.default.imageList="",Q.sharedDataApi.removeShellPersistentData("flaw_imageList").then(function(){console.log("成功清理图片")}).catch(function(){console.log("清理图片失败")})}catch(e){console.log(e)}localStorage.setItem("powerStationId",e.powerStationId)}},{key:"_sState",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),a=0;a<t.length;a++){var n=t[a],l=e[n];"imageList"==n?(F.default.imageList=String(l),Q.sharedDataApi.saveShellPersistentData("flaw_imageList",String(l)).then(function(){console.log("_sState 储存图片成功")}).catch(function(e){console.error(e)})):localStorage.setItem("flaw_"+n,String(l))}this.setState(g({},e))}},{key:"submit",value:function(){var e=this;if(R){for(var t=this.state,a=t.faultName,n=t.areaId,l=t.categoryId,i=t.deviceId,o=t.type,r=t.faultLevel,d=t.wrongCode,c=t.expectedTime,s=t.findTime,u=t.describe,f=t.faultReason,m=t.loseEnergy,g=(t.createUserId,t.containerURL),h=t.imageList,w=t.resultId,_=t.typeId,x={powerStationId:this._gQS("siteId","powerStationId")||"liuyl-wind-01",faultName:a,areaId:n,categoryId:l,deviceId:i,type:o,faultLevel:r,wrongCode:d,expectedTime:c,describe:u,findTime:s,faultReason:f,loseEnergy:m,createUserId:this._gQS("createUserId"),resultId:w,typeId:_},v={powerStationId:x.powerStationId,faultName:x.faultName,categoryId:x.categoryId,deviceId:x.deviceId,type:x.type,faultLevel:x.faultLevel,expectedTime:x.expectedTime,describe:x.describe,imageList:x.imageList,findTime:x.findTime,createUserId:x.createUserId},y=Object.keys(v),b=0;b<y.length;b++)if(""===v[y[b]]||null===v[y[b]])return void p.default.show("有必填选项未填写，请补充完整",2);if("[]"==h)return void p.default.show("请上传图片",2);if(JSON.parse(h).length>4)return void p.default.show("最多上传四张图片",2);x.expectedTime=c+" 00:00:00",x.findTime=s+" 00:00:00",R=!1,z(g,JSON.parse(h)).then(function(t){console.log("图片上传成功"),x.imageUrls=t,(0,C.api)("s-solaromds/app/op/fault/save",x,"POST").then(function(t){localStorage.setItem("refresh_steps","true"),console.log("创建成功"),console.log(t),p.default.success("创建成功",1),e._headBack("siteId="+x.powerStationId),R=!0},function(e){console.log("创建失败"),p.default.fail("创建失败",1),console.log(e),R=!0})}).catch(function(e){console.log("图拍上传失败"),console.log(e),R=!0})}}},{key:"_powerStationId",value:function(){localStorage.setItem("link","flawnew"),goto("deviceList?link=flawnew")}},{key:"_faultName",value:function(e){console.log(e),this._sState({faultName:e})}},{key:"_areaId",value:function(){goto("location?link=flawnew")}},{key:"_categoryId",value:function(){this._getCategoryIdData()}},{key:"_deviceId",value:function(){this._getDeviceIdData()}},{key:"_faultLevel",value:function(){this._getLevelsData()}},{key:"_wrongCode",value:function(e){this._sState({wrongCode:e})}},{key:"_describe",value:function(e){this._sState({describe:e})}},{key:"_faultReason",value:function(e){this._sState({faultReason:e})}},{key:"_loseEnergy",value:function(e){this._sState({loseEnergy:e})}},{key:"_createUserId",value:function(e){var t=this._gQS("createUserId");goto("flawusers?link=flawnew&userId="+t)}},{key:"_renderImgs",value:function(){return _.default.createElement("div",null,_.default.createElement("img",{className:B.default.img}),_.default.createElement("img",null))}},{key:"showPhotoSelectView",value:function(e){Q.Keyboard.hide(),console.log("Keyboard.hide"),this.setState({changeContent:!0}),this.setState({showPhoto:e})}},{key:"_headBack",value:function(e){this._clearAll(),localStorage.setItem("refresh_steps","true");var t=(this.state.type,localStorage.getItem("flaw_type_link"));t?(localStorage.removeItem("flaw_type_link"),Q.StatusBar.backgroundColorByHexString("#028FFF"),Q.nativeHistory.goBack()):(localStorage.removeItem("flaw_type_link"),parent.location.hash="#/flaw?"+e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.faultName,l=t.categoryId,i=t.deviceId,o=t.faultLevel,r=t.wrongCode,d=t.expectedTime,c=t.findTime,s=t.describe,u=t.faultReason,m=t.loseEnergy,p=t.faultLevelName,g=t.categoryIdName,h=t.deviceIdName,w=t.preViewIndex,x=t.showPreView,v=t.imageList,y=t.ssvTitle,S=t.ssvData,k=t.ssvShow,N=t.showPhoto,D=t.changeContent,V=t.areaId,L=t.areaIdName,U=t.createUserId,F=t.createUserIdName,z=this._gQS("siteId","powerStationId"),R=this._gQS("siteName","powerStationName"),O={height:"50px",marginLeft:"16px",paddingRight:"16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottom:"solid 1px rgba(215,219,224,0.4)"},j={height:"50px",paddingLeft:"16px",paddingRight:"16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottom:"solid 1px rgba(215,219,224,0.4)"},A={color:"#101015",fontSize:"14px",lineHeight:"50px",textAlign:"center"},W={fontSize:"14px",color:"#A4A5B3",display:"flex",flexDirection:"row",alignItems:"center"},J={fontSize:"14px",color:"#494952",display:"flex",flexDirection:"row",alignItems:"center"},M={width:"12px",height:"12px",marginLeft:"4px"},Y=localStorage.getItem("flaw_type_link");return _.default.createElement("div",{className:B.default.container},_.default.createElement(b.default,{goBack:function(){e._headBack()},title:"新建缺陷"}),_.default.createElement("div",{style:{height:"1px",width:"100%",background:"rgba(215,219,224,0.4)",marginTop:"64px"}}),_.default.createElement("div",{onScroll:function(){console.log("onScroll"),e.setState({changeContent:!0})},id:"content",style:{overflow:"auto",height:D?"100%":"76%",paddingBottom:"112px"}},_.default.createElement("div",{className:B.default.content},_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView,onClick:function(){!Y&&e._powerStationId()}},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"电站 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:z?B.default.rightSelected:B.default.right},_.default.createElement("span",{className:B.default.selectSpan},z?R:"请选择")," ",Y?null:_.default.createElement("img",{className:B.default.rightImg,src:a(1422)})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"名称 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:n?B.default.rightSelected:B.default.right},_.default.createElement("input",{value:n,placeholder:"请输入",className:B.default.input,onChange:function(t){return e._faultName(t.target.value)},autoFocus:!1})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView,onClick:function(){!Y&&e._areaId()}},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"位置")),_.default.createElement("div",{className:V?B.default.rightSelected:B.default.right},_.default.createElement("span",{className:B.default.selectSpan},V?L:"请选择")," ",Y?null:_.default.createElement("img",{className:B.default.rightImg,src:a(1422)})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView,onClick:function(){!Y&&e._categoryId()}},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"设备类型 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:l?B.default.rightSelected:B.default.right},_.default.createElement("span",null,l?g:"请选择")," ",Y?null:_.default.createElement("img",{className:B.default.rightImg,src:a(1422)})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{style:{marginLeft:"0px",paddingLeft:"16px"},className:B.default.childView,onClick:function(){!Y&&e._deviceId()}},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"设备名称 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:i?B.default.rightSelected:B.default.right},_.default.createElement("span",null,i?h:"请选择")," ",Y?null:_.default.createElement("img",{className:B.default.rightImg,src:a(1422)}))))),_.default.createElement("div",{className:B.default.content},_.default.createElement("div",{style:{height:"1px",width:"100vw",backgroundColor:"rgba(215,219,224,0.4)"}}),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView,onClick:function(){return e._faultLevel()}},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"缺陷等级 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:o?B.default.rightSelected:B.default.right},_.default.createElement("span",null,o?p:"请选择")," ",_.default.createElement("img",{className:B.default.rightImg,src:a(1422)})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"故障代码")),_.default.createElement("div",{className:r?B.default.rightSelected:B.default.right},_.default.createElement("input",{value:r,placeholder:"请输入",className:B.default.input,onChange:function(t){return e._wrongCode(t.target.value)},autoFocus:!1})))),_.default.createElement(f.default,{mode:"date",title:"期望完成日期",extra:"请选择",onVisibleChange:function(t){e._datePicker(t)},onChange:function(t){return e._sState({expectedTime:(0,C.fmtDate)(t,"yyyy-MM-dd")})}},_.default.createElement("div",{className:B.default.childBody,style:{backgroundColor:"#FFFFFF"}},_.default.createElement("div",{style:O},_.default.createElement("div",{style:A},_.default.createElement("span",null,"期望完成日期 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{style:d?J:W},_.default.createElement("span",null,d?d.replace(/-/g,"/"):"请选择")," ",_.default.createElement("img",{style:M,src:a(1422)}))))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childViewBig,style:{height:"152px"}},_.default.createElement("div",{className:B.default.leftBig},_.default.createElement("span",null,"故障描述 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:s?B.default.rightSelectedBig:B.default.rightBig},_.default.createElement(E.default,{value:s,placeholder:"请输入",inputClassName:B.default.inputBig,lenTextStyle:{paddingRight:"0px"},onChange:function(t){return e._describe(t.target.value)},autoFocus:!1,maxLength:100})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childViewBig,style:{marginLeft:"-20px",height:"auto",paddingBottom:"6px"}},_.default.createElement("div",{className:B.default.leftBig,style:{marginLeft:"40px",marginBottom:"-15px"}},_.default.createElement("span",null,"照片 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement(T.default,{show:function(t){return e.showPhotoSelectView(t)},imageList:JSON.parse(v),takePhotos:function(t){return e.takePhotos(t)},handleDelet:function(t){return e.handleDeletPhoto(t)},handlePreview:function(t){return e.handlePreview(t)}}))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{style:{height:"152px"},className:B.default.childViewBig},_.default.createElement("div",{className:B.default.leftBig},_.default.createElement("span",null,"原因分析")),_.default.createElement("div",{className:u?B.default.rightSelectedBig:B.default.rightBig},_.default.createElement(E.default,{value:u,placeholder:"请输入",inputClassName:B.default.inputBig,lenTextStyle:{paddingRight:"0px"},onChange:function(t){return e._faultReason(t.target.value)},autoFocus:!1,maxLength:100})))),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{style:{marginLeft:"0px",paddingLeft:"16px"},className:B.default.childView},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"损失电量")),_.default.createElement("div",{className:m?B.default.rightSelected:B.default.right},_.default.createElement("input",{onBlur:function(){e.setState({changeContent:!0})},onFocus:function(t){!Q.device.isAndroid&&e.setState({changeContent:!1})},type:"number",value:m,placeholder:"请输入",className:B.default.input,onChange:function(t){return e._loseEnergy(t.target.value)},autoFocus:!1}),_.default.createElement("div",{style:{lineHeight:"50px",marginLeft:"5px",color:"#292830"}},_.default.createElement("span",null,"kWh")))))),_.default.createElement("div",{className:B.default.content},_.default.createElement("div",{style:{height:"1px",width:"100vw",backgroundColor:"rgba(215,219,224,0.4)"}}),_.default.createElement("div",{className:B.default.childBody},_.default.createElement("div",{className:B.default.childView,onClick:function(){return e._createUserId()}},_.default.createElement("div",{className:B.default.left},_.default.createElement("span",null,"创建人 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{className:U?B.default.rightSelected:B.default.right},_.default.createElement("span",null,U?F:"请选择")," ",_.default.createElement("img",{className:B.default.rightImg,
src:a(1422)})))),_.default.createElement(f.default,{mode:"date",title:"创建日期",extra:"请选择",onVisibleChange:function(t){e._datePicker(t)},onChange:function(t){return e._sState({findTime:(0,C.fmtDate)(t,"yyyy-MM-dd")})}},_.default.createElement("div",{className:B.default.childBody,style:{backgroundColor:"#FFFFFF"}},_.default.createElement("div",{style:j},_.default.createElement("div",{style:A},_.default.createElement("span",null,"创建日期 ",_.default.createElement("span",{style:{color:"#F23349"}},"*"))),_.default.createElement("div",{style:c?J:W},_.default.createElement("span",null,c?c.replace(/-/g,"/"):"请选择")," ",_.default.createElement("img",{style:M,src:a(1422)}))))),_.default.createElement("div",{style:{height:"10px",width:"100vw",backgroundColor:"#FAFBFD"}}))),_.default.createElement("div",{className:B.default.submitDiv,style:{display:N?"none":"inline-block"}},_.default.createElement("button",{onClick:function(){return e.submit()}},"提交")),k?_.default.createElement(I.default,{title:y,onCancel:function(){return e._ssvCancel()},onSure:function(t){return e._ssvSure(t)},data:S}):null,x&&_.default.createElement(P.default,{imageList:JSON.parse(v),activeIndex:w,close:function(){return e.handleClosePreview()}}))}}]),t}(w.Component);v.default.render(_.default.createElement(O,null),document.getElementById("container"))},1419:function(e,t,a){var n=a(1420);"string"==typeof n&&(n=[[e.id,n,""]]);a(13)(n,{});n.locals&&(e.exports=n.locals)},1420:function(e,t,a){t=e.exports=a(12)(),t.push([e.id,".flawnew-_index_container_1Rwno{width:100%;margin:0;height:100%;background:#fafbfd;position:relative;overflow:hidden}.flawnew-_index_container_1Rwno input{-webkit-user-select:auto!important;-moz-user-select:auto!important;-ms-user-select:auto!important;user-select:auto!important;width:60vw;line-height:20px;font-size:14px}.flawnew-_index_container_1Rwno input::-webkit-input-placeholder{color:#a4a5b3;vertical-align:center;line-height:20px;font-size:14px}.flawnew-_index_container_1Rwno input::-moz-placeholder{color:#a4a5b3;vertical-align:center;line-height:20px;font-size:14px}.flawnew-_index_container_1Rwno input::-ms-input-placeholder{color:#a4a5b3;vertical-align:center;line-height:20px;font-size:14px}.flawnew-_index_container_1Rwno textarea::-webkit-input-placeholder{color:#a4a5b3;vertical-align:center}.flawnew-_index_container_1Rwno textarea::-moz-placeholder{color:#a4a5b3;vertical-align:center}.flawnew-_index_container_1Rwno textarea::-ms-input-placeholder{color:#a4a5b3;vertical-align:center}.flawnew-_index_content_25D9r{position:relative;margin-bottom:10px}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin{background-color:#fff}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC{height:50px;margin-left:16px;padding-right:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid rgba(215,219,224,.4)}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC .flawnew-_index_left_1ZVQZ{color:#101015;font-size:14px;line-height:50px;text-align:center}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC .flawnew-_index_right_37u02{font-size:14px;color:#a4a5b3;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC .flawnew-_index_rightSelected_1zZLe{font-size:14px;color:#494952;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;text-align:right;overflow:hidden}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC .flawnew-_index_rightSelected_1zZLe span{width:60vw}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC .flawnew-_index_rightImg_3XGqn{width:12px;height:12px;margin-left:4px}.flawnew-_index_content_25D9r .flawnew-_index_childBody_36Iin .flawnew-_index_childView_1WlnC .flawnew-_index_input_YPW_F{text-align:right;vertical-align:center;line-height:20px;font-size:14px}.flawnew-_index_childViewBig_4UkRT{background-color:#fff;height:142px;margin-left:16px;padding-right:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start;border-bottom:1px solid rgba(215,219,224,.4)}.flawnew-_index_childViewBig_4UkRT .flawnew-_index_leftBig_2kmPe{color:#101015;font-size:14px;line-height:50px;text-align:center;height:40px}.flawnew-_index_childViewBig_4UkRT .flawnew-_index_rightBig_14VW2{font-size:14px;color:#a4a5b3;-ms-flex:1;flex:1}.flawnew-_index_childViewBig_4UkRT .flawnew-_index_rightSelectedBig_KTp0D{font-size:14px;color:#494952;-ms-flex:1;flex:1}.flawnew-_index_childViewBig_4UkRT .flawnew-_index_inputBig_3uVbU{display:block;width:calc(100vw - 32px);height:110px}.flawnew-_index_childViewBig_4UkRT .flawnew-_index_imagesDiv_uGAJa{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;overflow-x:scroll;margin-top:6px}.flawnew-_index_childViewBig_4UkRT .flawnew-_index_img_1sPU5{width:80px;height:80px}.flawnew-_index_selectSpan_2-dBE{max-width:60vw;overflow:hidden;height:16px;white-space:nowrap;text-overflow:ellipsis}.flawnew-_index_submitDiv_uBYKn{position:fixed;left:0;bottom:0;background-color:#fff;z-index:100;border-top:1px solid rgba(215,219,224,.5);width:100vw}.flawnew-_index_submitDiv_uBYKn button{display:block;width:91.5%;height:40px;line-height:40px;margin:8px auto;border:none;background:#099dff;color:#fff;border-radius:40px;font-size:15px}",""]),t.locals={container:"flawnew-_index_container_1Rwno",content:"flawnew-_index_content_25D9r",childBody:"flawnew-_index_childBody_36Iin",childView:"flawnew-_index_childView_1WlnC",left:"flawnew-_index_left_1ZVQZ",right:"flawnew-_index_right_37u02",rightSelected:"flawnew-_index_rightSelected_1zZLe",rightImg:"flawnew-_index_rightImg_3XGqn",input:"flawnew-_index_input_YPW_F",childViewBig:"flawnew-_index_childViewBig_4UkRT",leftBig:"flawnew-_index_leftBig_2kmPe",rightBig:"flawnew-_index_rightBig_14VW2",rightSelectedBig:"flawnew-_index_rightSelectedBig_KTp0D",inputBig:"flawnew-_index_inputBig_3uVbU",imagesDiv:"flawnew-_index_imagesDiv_uGAJa",img:"flawnew-_index_img_1sPU5",selectSpan:"flawnew-_index_selectSpan_2-dBE",submitDiv:"flawnew-_index_submitDiv_uBYKn"}},1421:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={imageList:""}},1422:function(e,t,a){e.exports=a.p+"assets/imgs/right_2sWGc.png"}});