webpackJsonp([16],{0:function(e,t,n){e.exports=n(1430)},1430:function(e,t,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.length;if(!(S||k[k.length-1]&&e===k[k.length-1].name)){L=!0;var n=k.map(function(e){return e.name});n=n.slice(0,t),Number.isInteger(e)?n=n.slice(0,e):n.push(encodeURIComponent(e)),location.hash="/"+n.join("/")}}function i(){function e(e){return k.pop(),new Promise(function(t){function n(){e.remove(),t()}L?(e.style.left="100%",e.style.transition="left .3s",e.addEventListener("webkitTransitionEnd",n)):n()})}function t(e){return new Promise(function(t){var n=document.createElement("iframe"),i=decodeURIComponent(e).split("?"),l=v(i,2),s=l[0],d=l[1];if(n.src=s+".html"+(d?"?"+d:""),T.appendChild(n),k.length>0&&L?n.onload=function(){function e(){k.forEach(function(e,t){return t<k.length-1&&(e.style.opacity=0)}),n.removeEventListener("webkitTransitionEnd",e),t()}n.style.transition="left .3s",n.style.left=0,n.addEventListener("webkitTransitionEnd",e)}:(n.onload=t,n.style.transition="none",n.style.left=0),n.addEventListener("load",function(){return n.contentDocument.documentElement.style.fontSize=P}),n.contentWindow.goto=o,n.contentWindow.ga=gtag,n.contentWindow.alert=a,n.contentWindow.confirm=r,n.contentWindow.toast=c,n.name=e,k.length>0){var u=k[k.length-1].contentWindow.covered;u&&u()}if(1===k.length&&"login"===decodeURIComponent(k[0].name).split("?")[0]){var m=k[0];m.style.transition="opacity 3s",m.style.opacity=0}k.push(n)})}S=!0;var n=location.hash.substr(2).split("/"),i=!1,l=Promise.all(k.filter(function(e,t){return i=i||n[t]!==k[t].name}).map(e)),s=Promise.all(n.filter(function(e,t){return t>=k.length}).map(function(e){return t(e)}));k[k.length-1].style.opacity=1,Promise.all([l,s]).then(function(e){S=!1;var t=k[k.length-1].contentWindow.reveal;gtag("event","pageview",{event_label:k[k.length-1].name}),t&&t()}),L=!1}function a(e,t,n,o){var i={reminder:{en:"Reminder",zh:"提示"},iKnow:{en:"I know",zh:"我知道了"}};document.getElementById("alert_title").innerText=t||i.reminder[w.language],document.getElementById("message").innerText=e,document.getElementById("alert_confirm").innerText=n||i.iKnow[w.language],document.getElementById("alert").style.display="block",C=o}function r(e,t,n,o,i,a){return R.style.display="block",document.getElementById("confirm_title").innerText=e||"提示",document.getElementById("confirm_content").innerText=t||"确认删除此设备?",document.getElementById("confirm_cancel").innerText=i||"取消",document.getElementById("confirm_confirm").innerText=a||"确认删除",F=n,D=o,new Promise(function(e){_=e})}function c(e,t,n){var o=document.getElementById("toast_wrap");o.style.display="block",t?(document.getElementById("toast_icon").src=t,document.getElementById("toast_icon").style.display="block"):document.getElementById("toast_icon").style.display="none",document.getElementById("toast_tip").innerText=e,setTimeout(function(){o.style.display="none",n&&n()},2e3)}function l(e){var t=document.createElement("a");return t.href=e,t.href}function s(e,t){e.file(function(n){var o=new FileReader;o.onloadend=function(){t(JSON.parse(this.result))},o.onerror=function(){a("文件打开失败："+e.fullPath)},o.readAsText(n)},h)}function d(e,t){var n=document.createElement("img");n.src=t,n.onload=function(){var t=document.createElement("canvas"),o=n.width,i=n.height,a=t.getContext("2d");t.width=o,t.height=i,a.drawImage(n,0,0);var r=t.toDataURL("image/jpeg",.5);console.log(r);var c=u(r);m(e,c,"downloadedImage.jpeg")}}function u(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new Blob([a],{type:n})}function m(e,t,n){e.getFile(n,{create:!0,exclusive:!1},function(e){f(e,t)},y)}function f(e,t,n){e.createWriter(function(e){e.onwriteend=function(){console.log("writeok"),n&&(window.location=n)},e.onerror=function(e){console.log("Failed file write: "+e.toString())},e.write(t)})}function g(){return console.log("加载文件失败"),!1}function y(){return console.log("创建文件失败"),!1}function h(){return console.log("读取文件失败"),!1}function p(){location.hash="/siteHome?time="+(new Date).getTime()}var v=function(){function e(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=n(24),E=n(157);"undefined"!=typeof applicationCache&&(applicationCache.addEventListener("updateready",function(e){return 4==e.target.status&&location.reload(e.target.swapCache())}),setInterval(function(){return applicationCache.update()},"https:"==location.protocol?1e5:2e3));var I=navigator.userAgent;if(I.indexOf("cordova")>=0){var B=function(e){return e.split(".").reduce(function(e,t){return 1e3*e+1*t})},x=I.match(/version:\s*(\d*\.\d*\.\d*)/);(!x||B(x[1])<B("1.0.5"))&&(window.alert("您需要更新您的app版本,否则app可能会出现无法预料的错误行为"),setTimeout(function(e){navigator.app?navigator.app.loadUrl(l("install/"),{openExternal:!0}):location="install/"},3e3))}if(I.indexOf("iPhone")>=0&&I.indexOf("cordova")>=0){document.getElementById("container").style.height="calc(100% - constant(safe-area-inset-top) - constant(safe-area-inset-bottom) + 20px)",document.getElementById("container").style.height="calc(100% - env(safe-area-inset-bottom) - env(safe-area-inset-top) + 20px)",document.getElementById("container").style.marginTop="calc(constant(safe-area-inset-top) - 20px)",document.getElementById("container").style.marginTop="calc(env(safe-area-inset-top) - 20px)";var b=window.parent.document.body;b.style.backgroundColor="#FFFFFF",E.StatusBar.backgroundColorByHexString("#000"),E.StatusBar.styleDefault()}else document.getElementById("container").style.height="calc(100% + 20px)",document.getElementById("container").style.marginTop="-20px";var P=document.body.clientWidth/375*12+"px";document.documentElement.style.fontSize=P;var k=[],T=document.getElementById("container"),L=!1,S=!1;window.goto=o,window.addEventListener("hashchange",i),location.hash.substr(2)?i():location.hash="/login/siteHome";var C;document.getElementById("alert_confirm").addEventListener("click",function(e){C&&C(),document.getElementById("alert").style.display="none"});var _,F,R=document.getElementById("confirm_wrap");document.getElementById("confirm_confirm").addEventListener("click",function(){R.style.display="none",F&&F(),_(!0)});var D;document.getElementById("confirm_cancel").addEventListener("click",function(){R.style.display="none",D&&D(),_(!1)}),window.call=function(e){var t=document.createElement("a");t.href="tel:"+e,t.click()},document.addEventListener("deviceready",function(){if(window.JPush){var e=function(e){var t=e.extras,n=t.siteId,o=t.taskId,i=t.status,a=t.category,r=t.globalId,c=(t.deviceId,t.type);if("alarm"==a)1==c?location.hash="/login/siteHome/alarmList/alarmDetail1?siteId="+n+"&globalId="+r:location.hash="/login/siteHome/alarmList";else{if(n)return void("1"==i?location.hash="/login/siteHome/homeInsert/customerDetail?siteId="+n:location.hash="/login/siteHome/homeInsert/customerDetail?siteId="+n+"/failureReason");var l={PendingRepirs:"1",PendingAcceptance:"2",PendingSignIn:"3",PendingSolved:"4",PendingClosed:"5",Closed:"9",Transfered:"10"};switch(i){case l.PendingRepirs:case l.PendingAcceptance:case l.PendingSignIn:case l.PendingClosed:case l.Closed:case l.Transfered:location.hash="/login/siteHome/taskList?type=1/taskDetail?taskId="+o;break;case l.PendingSolved:location.hash="/login/siteHome/taskList?type=2/taskSummary?taskId="+o}}};JPush.init(),document.addEventListener("jpush.openNotification",e);var t=function(e){try{var t=e.content;$("#messageResult").html(t)}catch(e){console.log("JPushPlugin:onReceiveMessage-->"+e)}};document.addEventListener("jpush.receiveMessage",t,!1)}}),window.registerPush=function(e){window.JPush?JPush.setAlias(e):console.error("没有加载极光推的插件")},window.writeData=function(e,t,n){try{window.requestFileSystem(1,0,function(o){o.root.getFile(t,{create:!0,exclusive:!1},function(o){o.name==t;var i=new Blob([e],{type:"text/plain"});f(o,i,n)},y)},g)}catch(e){console.log(e)}},window.readData=function(e,t){try{window.requestFileSystem(1,0,function(n){n.root.getFile(e,{create:!1,exclusive:!1},function(n){n.name==e,s(n,t)},h)},g)}catch(e){console.log(e)}},window.saveImage=function(e){try{window.requestFileSystem(1,0,function(t){d(t.root,e)},g)}catch(e){console.log(e)}},window.goHome=p}});