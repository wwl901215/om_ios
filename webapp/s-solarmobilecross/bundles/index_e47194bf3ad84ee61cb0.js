webpackJsonp([5],{0:function(e,n,t){e.exports=t(848)},848:function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.length;if(!(L||k[k.length-1]&&e===k[k.length-1].name)){_=!0;var t=k.map(function(e){return e.name});t=t.slice(0,n),Number.isInteger(e)?t=t.slice(0,e):t.push(encodeURIComponent(e)),location.hash="/"+t.join("/")}}function a(){function e(e){return k.pop(),new Promise(function(n){function t(){e.remove(),n()}_?(e.style.left="100%",e.style.transition="left .3s",e.addEventListener("webkitTransitionEnd",t)):t()})}function n(e){return new Promise(function(n){var t=document.createElement("iframe"),o=decodeURIComponent(e).split("?"),a=w(o,2),s=a[0],d=a[1];if(t.src=s+".html"+(d?"?"+d:""),T.appendChild(t),k.length>0&&_?t.onload=function(){function e(){k.forEach(function(e,n){return n<k.length-1&&(e.style.opacity=0)}),t.removeEventListener("webkitTransitionEnd",e),n()}t.style.transition="left .3s",t.style.left=0,t.addEventListener("webkitTransitionEnd",e)}:(t.onload=n,t.style.transition="none",t.style.left=0),t.addEventListener("load",function(){return t.contentDocument.documentElement.style.fontSize=P}),t.contentWindow.goto=i,t.contentWindow.ga=gtag,t.contentWindow.alert=r,t.contentWindow.confirm=c,t.contentWindow.toast=l,t.name=e,k.length>0){var u=k[k.length-1].contentWindow.covered;u&&u()}if(1===k.length&&"login"===decodeURIComponent(k[0].name).split("?")[0]){var m=k[0];m.style.transition="opacity 3s",m.style.opacity=0}k.push(t)})}L=!0;var t=location.hash.substr(2).split("/"),o=!1,a=Promise.all(k.filter(function(e,n){return o=o||t[n]!==k[n].name}).map(e)),s=Promise.all(t.filter(function(e,n){return n>=k.length}).map(function(e){return n(e)}));k[k.length-1].style.opacity=1,Promise.all([a,s]).then(function(e){L=!1;var n=k[k.length-1].contentWindow.reveal;gtag("event","pageview",{event_label:k[k.length-1].name}),n&&n()}),_=!1}function r(e,n,t,o){var i={reminder:{en:"Reminder",zh:"提示"},iKnow:{en:"I know",zh:"我知道了"}};document.getElementById("alert_title").innerText=n||i.reminder[I.language],document.getElementById("message").innerText=e,document.getElementById("alert_confirm").innerText=t||i.iKnow[I.language],document.getElementById("alert").style.display="block",C=o}function c(e,n,t,o,i,a){return S.style.display="block",document.getElementById("confirm_title").innerText=e||"提示",document.getElementById("confirm_content").innerText=n||"确认删除此设备?",document.getElementById("confirm_cancel").innerText=i||"取消",document.getElementById("confirm_confirm").innerText=a||"确认删除",A=t,D=o,new Promise(function(e){R=e})}function l(e,n,t){var o=document.getElementById("toast_wrap");o.style.display="block",n?(document.getElementById("toast_icon").src=n,document.getElementById("toast_icon").style.display="block"):document.getElementById("toast_icon").style.display="none",document.getElementById("toast_tip").innerText=e,setTimeout(function(){o.style.display="none",t&&t()},2e3)}function s(e){var n=document.createElement("a");return n.href=e,n.href}function d(e,n){e.file(function(t){var o=new FileReader;o.onloadend=function(){n(JSON.parse(this.result))},o.onerror=function(){r("文件打开失败："+e.fullPath)},o.readAsText(t)},p)}function u(e,n){var t=document.createElement("img");t.src=n,t.onload=function(){var n=document.createElement("canvas"),o=t.width,i=t.height,a=n.getContext("2d");n.width=o,n.height=i,a.drawImage(t,0,0);var r=n.toDataURL("image/jpeg",.5);console.log(r);var c=m(r);f(e,c,"downloadedImage.jpeg")}}function m(e){for(var n=e.split(","),t=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new Blob([a],{type:t})}function f(e,n,t){e.getFile(t,{create:!0,exclusive:!1},function(e){g(e,n)},y)}function g(e,n,t){e.createWriter(function(e){e.onwriteend=function(){console.log("writeok"),t&&(window.location=t)},e.onerror=function(e){console.log("Failed file write: "+e.toString())},e.write(n)})}function h(){return console.log("加载文件失败"),!1}function y(){return console.log("创建文件失败"),!1}function p(){return console.log("读取文件失败"),!1}function v(){location.hash="/siteHome?time="+(new Date).getTime()}var w=function(){function e(e,n){var t=[],o=!0,i=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done)&&(t.push(r.value),!n||t.length!==n);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=t(184),I=(o(E),t(183));t(194);"undefined"!=typeof applicationCache&&(applicationCache.addEventListener("updateready",function(e){return 4==e.target.status&&location.reload(e.target.swapCache())}),setInterval(function(){return applicationCache.update()},"https:"==location.protocol?1e5:2e3));var x=navigator.userAgent;if(x.indexOf("cordova")>=0){var B=function(e){return e.split(".").reduce(function(e,n){return 1e3*e+1*n})},b=x.match(/version:\s*(\d*\.\d*\.\d*)/);(!b||B(b[1])<B("1.0.5"))&&(window.alert("您需要更新您的app版本,否则app可能会出现无法预料的错误行为"),setTimeout(function(e){navigator.app?navigator.app.loadUrl(s("install/"),{openExternal:!0}):location="install/"},3e3))}x.indexOf("iPhone")>=0&&x.indexOf("cordova")>=0?(document.getElementById("container").style.height="calc(100% - constant(safe-area-inset-top) - constant(safe-area-inset-bottom) + 20px)",document.getElementById("container").style.height="calc(100% - env(safe-area-inset-bottom) - env(safe-area-inset-top) + 20px)",document.getElementById("container").style.marginTop="calc(constant(safe-area-inset-top) - 20px)",document.getElementById("container").style.marginTop="calc(env(safe-area-inset-top) - 20px)"):(document.getElementById("container").style.height="calc(100% + 20px)",document.getElementById("container").style.marginTop="-20px");var P=document.body.clientWidth/375*12+"px";document.documentElement.style.fontSize=P;var k=[],T=document.getElementById("container"),_=!1,L=!1;window.goto=i,window.addEventListener("hashchange",a),location.hash.substr(2)?a():location.hash="/login/siteHome";var C=void 0;document.getElementById("alert_confirm").addEventListener("click",function(e){C&&C(),document.getElementById("alert").style.display="none"});var S=document.getElementById("confirm_wrap"),R=void 0,A=void 0;document.getElementById("confirm_confirm").addEventListener("click",function(){S.style.display="none",A&&A(),R(!0)});var D=void 0;document.getElementById("confirm_cancel").addEventListener("click",function(){S.style.display="none",D&&D(),R(!1)}),window.call=function(e){var n=document.createElement("a");n.href="tel:"+e,n.click()},document.addEventListener("deviceready",function(){if(window.JPush){var e=function(e){var n=e.extras,t=n.siteId,o=n.taskId,i=n.status,a=n.category,r=n.globalId,c=(n.deviceId,n.type);if("alarm"==a)1==c?location.hash="/login/siteHome/alarmList/alarmDetail1?siteId="+t+"&globalId="+r:location.hash="/login/siteHome/alarmList";else{if(t)return void("1"==i?location.hash="/login/siteHome/homeInsert/customerDetail?siteId="+t:location.hash="/login/siteHome/homeInsert/customerDetail?siteId="+t+"/failureReason");var l={PendingRepirs:"1",PendingAcceptance:"2",PendingSignIn:"3",PendingSolved:"4",PendingClosed:"5",Closed:"9",Transfered:"10"};switch(i){case l.PendingRepirs:case l.PendingAcceptance:case l.PendingSignIn:case l.PendingClosed:case l.Closed:case l.Transfered:location.hash="/login/siteHome/taskList?type=1/taskDetail?taskId="+o;break;case l.PendingSolved:location.hash="/login/siteHome/taskList?type=2/taskSummary?taskId="+o}}};JPush.init(),document.addEventListener("jpush.openNotification",e);var n=function(e){try{var n=e.content;$("#messageResult").html(n)}catch(e){console.log("JPushPlugin:onReceiveMessage-->"+e)}};document.addEventListener("jpush.receiveMessage",n,!1)}}),window.registerPush=function(e){window.JPush?JPush.setAlias(e):console.error("没有加载极光推的插件")},window.writeData=function(e,n,t){try{window.requestFileSystem(1,0,function(o){o.root.getFile(n,{create:!0,exclusive:!1},function(o){o.name==n;var i=new Blob([e],{type:"text/plain"});g(o,i,t)},y)},h)}catch(e){console.log(e)}},window.readData=function(e,n){try{window.requestFileSystem(1,0,function(t){t.root.getFile(e,{create:!1,exclusive:!1},function(t){t.name==e,d(t,n)},p)},h)}catch(e){console.log(e)}},window.saveImage=function(e){try{window.requestFileSystem(1,0,function(n){u(n.root,e)},h)}catch(e){console.log(e)}},window.goHome=v}});